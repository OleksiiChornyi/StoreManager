--Tables
--1Користувачі
    CREATE TABLE Users (
        UserID NUMBER PRIMARY KEY,
        UserName VARCHAR2(50) NOT NULL UNIQUE,
        PasswordHash VARCHAR2(64),
        ContactInfo VARCHAR2(100),
        UserRole VARCHAR2(50) NOT NULL,
        OrderCount NUMBER DEFAULT 0 NOT NULL
    );

--2Категорії
CREATE TABLE Categories (
    CategoryID NUMBER PRIMARY KEY,
    CategoryName VARCHAR2(50) NOT NULL UNIQUE,
    CategoryDescription VARCHAR2(255),
    ParentCategoryID NUMBER,
    CONSTRAINT FK_ParentCategory
        FOREIGN KEY (ParentCategoryID)
        REFERENCES Categories(CategoryID)
);

--3Опис
CREATE TABLE Descriptions (
    DescriptionID NUMBER PRIMARY KEY,
    FileName VARCHAR2(50),
    FileType VARCHAR2(50),
    FileExtension VARCHAR2(50),
    FileData BLOB,
    UploadDate DATE,
    ModificationDate DATE,
    Info VARCHAR(255)
);

--4Товари
CREATE TABLE Products (
    ProductID NUMBER PRIMARY KEY,
    SKU VARCHAR2(50) NOT NULL,
    ProductName VARCHAR2(100) NOT NULL,
    DescriptionID NUMBER,
    ProductImage BLOB NOT NULL,
    ProductImageFileName VARCHAR2(100) NOT NULL,
    Cost NUMBER NOT NULL,
    CategoryID NUMBER NOT NULL,
    SalesCount NUMBER DEFAULT 0 NOT NULL,
    FOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID),
    FOREIGN KEY (DescriptionID) REFERENCES Descriptions (DescriptionID)
);

--5Товари замовлення
CREATE TABLE OrderItems (
    OrderItemID NUMBER PRIMARY KEY,
    OrderNumber NUMBER NOT NULL,
    ProductID NUMBER NOT NULL,
    Quantity NUMBER NOT NULL,
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
);

--6Замовлення
CREATE TABLE Orders (
    OrderID NUMBER PRIMARY KEY,
    OrderNumber NUMBER NOT NULL,
    OrderDate DATE NOT NULL,
    OrderStatus VARCHAR2(50),
    UserID NUMBER NOT NULL,
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);

--7Готівка
CREATE TABLE Cash (
    CashID NUMBER PRIMARY KEY,
    OrderNumber NUMBER NOT NULL
);

--8Карта
CREATE TABLE BankCard (
    BankCardID NUMBER PRIMARY KEY,
    BankNumber VARCHAR2(50) NOT NULL,
    OrderNumber NUMBER NOT NULL
);

--9Оплата
CREATE TABLE Payments (
    PaymentID NUMBER PRIMARY KEY,
    UserId NUMBER NOT NULL,
    OrderNumber NUMBER NOT NULL,
    TotalPrice NUMBER NOT NULL,
    CashID NUMBER,
    BankCardID NUMBER,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (CashID) REFERENCES Cash(CashID),
    FOREIGN KEY (BankCardID) REFERENCES BankCard(BankCardID)
);

--10Постачальники
CREATE TABLE Suppliers (
    SupplierID NUMBER PRIMARY KEY,
    CompanyName VARCHAR2(100) NOT NULL,
    ContactInfo VARCHAR2(100) NOT NULL,
    SupplierAddress VARCHAR2(255) NOT NULL
);

--11Відвантаження
CREATE TABLE Shipments (
    ShipmentID NUMBER PRIMARY KEY,
    ShipmentNumber VARCHAR2(50) NOT NULL,
    ShipmentDate DATE NOT NULL,
    ShipmentStatus VARCHAR2(50) NOT NULL,
    OrderID NUMBER NOT NULL,
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID)
);

--12Склади
CREATE TABLE Warehouses (
    WarehouseID NUMBER PRIMARY KEY,
    WarehouseName VARCHAR2(255) NOT NULL,
    Location VARCHAR2(255) NOT NULL,
    Capacity NUMBER NOT NULL,
    Availability NUMBER NOT NULL
);

--13Інвентаризація
CREATE TABLE Inventory (
    InventoryID NUMBER PRIMARY KEY,
    ProductID NUMBER NOT NULL,
    QuantityOnHand NUMBER NOT NULL,
    WarehouseID NUMBER NOT NULL,
    InventoryDate DATE NOT NULL,
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID),
    FOREIGN KEY (WarehouseID) REFERENCES Warehouses(WarehouseID)
);


--14Зміни
CREATE TABLE AuditLogs (
    LogID NUMBER PRIMARY KEY,
    ActionType VARCHAR2(50),
    ActionDateTime TIMESTAMP,
    ActionDetails VARCHAR2(255)
);
